<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>CCL2021中文空间语义理解评测报名情况</title>

    <link href="dist/bootstrap.min.css" rel="stylesheet">
    <style type="text/css">
        body{background: #eee;}
        .bodywrap{min-height: 100vh;}
        .container.page{background: #fff;}
        .hidden{display: none;}
        .m0{margin: 0;}
        /*.form-control{border: 1px solid #eee;}*/
        .progress-bar{transition: all 0.5s;}
        .btn{transition: all 0.5s; margin: 1px;}
        /*#footer{padding-bottom: 5rem;}*/
        .container{transition: max-width 1s, width 1s;}
        /**/
        /**/
        .table-wrap{overflow: auto;}
    </style>
    <style type="text/css">
        @media print{
            body{background: #fff; min-width:0 !important;}
            .container{min-width:0 !important;}
            .bodywrap{max-width: 100%;}
            .page{max-width: 100%;}
            blockquote, pre{page-break-inside: initial;}
            .navbar{display: none;}
            #page-import{display: none;}
            #page-stage{display: none;}
            #page-items-1{display: none;}
            #page-items-2{display: none;}
        }
    </style>


<style type="text/css">

.bodywrap {
    min-height: 100vh;
}
.container.page {
    background: #fff;
}
.hidden {
    display: none;
}
.outputbox {
    font-size: 10px;
}
.navbar-collapse {
    max-height: calc(90vh - 6rem);
    overflow-y: scroll;
}
.modal-header, .modal-footer {
    padding: 0.5rem 1rem;
}
.modal-body {
    padding: 1.5rem 1rem;
}
.alert-wrap {
    position: fixed;
    top: 1rem;
    right: 1rem;
    z-index: 2050;
    display: none;
    width: 360px;
    max-width: 80vw;
    overflow: hidden;
    outline: 0;
}
.fade-enter-active, .fade-leave-active {
    transition: opacity 0.5s;
}
.fade-enter, .fade-leave-to
/* .fade-leave-active, 2.1.8 版本以下 */

    {
    opacity: 0;
    /*display: none;*/
}
.modal-wrap {
    position: fixed;
    z-index: 1040;
}
.modal-fade-enter-active, .modal-fade-leave-active {
    transition: opacity 0.5s;
}
.modal-fade-enter, .modal-fade-leave-to
/* .modal-fade-leave-active, 2.1.8 版本以下 */

    {
    opacity: 0;
    z-index: 1040;
    /*display: none;*/
}

</style>

</head>

<body>

<div class="bodywrap py-2" id="bodywrap">

    <div class="container page my-5" id="the_list"><div class="container py-2">
        <div class="row my-2 g-4">
            <div class="col-12">
                <h2>CCL2021中文空间语义理解评测报名情况</h2>
            </div>
        </div>
        <div class="row my-2 g-4">
            <div class="col-12">
                <div class="input-group">
                  <input v-if="!logged_in" type="text" class="form-control" placeholder="工作人员填写姓名" v-model="worker">
                  <input v-if="worker&&!logged_in" type="text" class="form-control" placeholder="工作人员暗号" aria-label="工作人员暗号" v-model="signal">
                  <button v-if="worker&&!logged_in" class="btn btn-outline-secondary" type="button" v-on:click="logIn">确认</button>
                  <span v-if="logged_in" class="input-group-text">{{worker}}</span>
                  <button v-if="logged_in" class="btn btn-outline-secondary" type="button" v-on:click="logOut">退出</button>
                </div>
            </div>
        </div>
        <div class="row my-2 g-4" v-if="letter">
            <div class="col-12">
                <div>
                  <p>请用 sc_eval@163.com 给 {{letter_to.email}} 发送含有以下内容的邮件：</p>
                </div>
                <div>
                  <textarea class="form-control" v-model="letter_title" rows="1"></textarea>
                  <textarea class="form-control" v-model="letter" rows="6"></textarea>
                </div>
            </div>
            <div class="col-12">
                <div>
                  <button class="btn btn-sm btn-danger" v-on:click="letter=''">先不办了</button>
                  <button class="btn btn-sm btn-primary" v-on:click="written">办妥了</button>
                </div>
            </div>
        </div>
        <div class="row my-4 g-4" v-if="!has_power">
          <div class="col-4">
            <h4>已报名的队伍</h4>
          </div>
          <div class="col-4">
            <p><button class="btn btn-sm btn-primary" v-on:click="refresh">刷新</button></p>
          </div>
          <div class="col-12 table-wrap">
            <table class="table table-bordered table-striped table-hover" v-if="teams.length">
              <thead>
                <tr v-for="team in [teams[0]]">
                  <th scope="col" v-for="v, k in team">{{k}}</th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="team in teams">
                  <!-- <th scope="row">-</th> -->
                  <td v-for="v, k in team">{{v}}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
        <div class="row my-4 g-4" v-if="has_power">
          <div class="col-4">
            <h4>已报名的队伍</h4>
          </div>
          <div class="col-4">
            <p><button class="btn btn-sm btn-primary" v-on:click="refresh">刷新</button></p>
          </div>
          <div class="col-12 table-wrap">
            <table class="table table-bordered table-striped table-hover align-middle" v-if="happy_teams.length">
<!--               <thead>
                <tr v-for="team in [happy_teams[0]]">
                  <th scope="col" v-for="v, k in team">{{k}}</th>
                </tr>
              </thead> -->
              <thead>
                <tr>
                  <th scope="col">队名</th>
                  <th scope="col">来源</th>
                  <th scope="col">队长</th>
                  <th scope="col">邮箱</th>
                  <th scope="col">手机</th>
                  <th scope="col">单位</th>
                  <th scope="col">子团体</th>
                  <th scope="col">已确认</th>
                  <th scope="col">邮件</th>
                </tr>
              </thead>
              <tbody>
                <tr v-for="team in happy_teams">
                  <!-- <th scope="row">-</th> -->
                  <!-- <td v-for="v, k in team">{{v}}</td> -->
                  <th scope="row">{{team.team_name}}</th>
                  <td>{{team.team_type}}</td>
                  <td>{{team.leader}}</td>
                  <td>{{team.email}}</td>
                  <td>{{team.phone}}</td>
                  <td><span :title="team.institution">{{team.institution2||team.institution}}</span></td>
                  <td>{{team.group}}</td>
                  <td><span v-if="team.checked2" class="badge bg-success">已确认</span><span v-if="!team.checked2" class="badge bg-secondary">未确认</span></td>
                  <td>
                    <span v-if="team.checked2" class="badge bg-success">{{team.checked_by}}已发送</span><span v-if="team.checked1&&!team.checked2" class="badge bg-primary">{{team.checked_by}}已发送</span><span v-if="!team.checked1&&!team.checked2" class="badge bg-danger">未发送</span><span v-if="!team.checked1&&team.checked2" class="badge bg-danger">未发送但居然确认过了?</span>
                    <button v-if="!team.checked2" class="btn btn-sm btn-light" v-on:click="write(team)">撰写</button>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
    </div></div>





<!-- Modal -->
<transition name = "modal-fade"><div v-show="ui.modal_open" class="modal-wrap">
<div class="modal-backdrop show"></div>
<div class="modal" id="exampleModalScrollable" tabindex="-1" role="dialog" aria-labelledby="exampleModalScrollableTitle" style="display: block;" aria-modal="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalScrollableTitle">文档</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true" v-on:click="toggle_modal('')">×</span>
                </button>
            </div>
            <div class="modal-body"><div>
                <div>
                    <p>哈哈哈</p>
                </div>
            </div></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal" v-on:click="toggle_modal('')">Close</button>
            </div>
        </div>
    </div>
</div>
</div>
</transition>


<!-- Alert -->
<div class="alert-wrap" style="display: block;" ref="alert_wrap">
    <transition name = "fade" v-for="alert in ui.alerts"><div v-show="alert.show" class="alert alert-dismissible alert-success" :class="'alert-'+alert.class">
        <button type="button" class="btn-close" v-on:click="remove_alert(alert.idx)"></button>
        <div v-html="alert.html"></div>
    </div></transition>
</div>





</div>
<script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.10.1/dist/av-min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/leancloud-storage@5.0.0-beta.0/dist/browser/lc.min.js"></script>
<script type="text/javascript" src="dist/vue.min.js"></script>
<script type="text/javascript" src="dist/FileSaver.js"></script>
<script type="text/javascript" src="js/CheckIn.js"></script>
</body>
</html>
