<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <title>CCL2021中文空间语义理解评测数据提交</title>

    <link href="dist/bootstrap.min.css" rel="stylesheet">
    <style type="text/css">
        body{background: #eee;}
        .bodywrap{min-height: 100vh;}
        .container.page{background: #fff;}
        .hidden{display: none;}
        .m0{margin: 0;}
        /*.form-control{border: 1px solid #eee;}*/
        .progress-bar{transition: all 0.5s;}
        .btn{transition: all 0.5s; margin: 1px;}
        /*#footer{padding-bottom: 5rem;}*/
        .container{transition: max-width 1s, width 1s;}
        /**/
        /**/
        .table-wrap{overflow: auto;}
    </style>
    <style type="text/css">
        @media print{
            body{background: #fff; min-width:0 !important;}
            .container{min-width:0 !important;}
            .bodywrap{max-width: 100%;}
            .page{max-width: 100%;}
            blockquote, pre{page-break-inside: initial;}
            .navbar{display: none;}
            #page-import{display: none;}
            #page-stage{display: none;}
            #page-items-1{display: none;}
            #page-items-2{display: none;}
        }
    </style>


<style type="text/css">

.bodywrap {
    min-height: 100vh;
}
.container.page {
    background: #fff;
}
.hidden {
    display: none;
}
.outputbox {
    font-size: 10px;
}
.navbar-collapse {
    max-height: calc(90vh - 6rem);
    overflow-y: scroll;
}
.modal-header, .modal-footer {
    padding: 0.5rem 1rem;
}
.modal-body {
    padding: 1.5rem 1rem;
}
.alert-wrap {
    position: fixed;
    top: 1rem;
    right: 1rem;
    z-index: 2050;
    display: none;
    width: 360px;
    max-width: 80vw;
    overflow: hidden;
    outline: 0;
}
.fade-enter-active, .fade-leave-active {
    transition: opacity 0.5s;
}
.fade-enter, .fade-leave-to
/* .fade-leave-active, 2.1.8 版本以下 */

    {
    opacity: 0;
    /*display: none;*/
}
.modal-wrap {
    position: fixed;
    z-index: 1040;
}
.modal-fade-enter-active, .modal-fade-leave-active {
    transition: opacity 0.5s;
}
.modal-fade-enter, .modal-fade-leave-to
/* .modal-fade-leave-active, 2.1.8 版本以下 */

    {
    opacity: 0;
    z-index: 1040;
    /*display: none;*/
}

</style>

</head>

<body>

<div class="bodywrap py-2" id="bodywrap">

    <div class="container page my-5" id="the_list" v-if="!submitted"><div class="container py-5">
      <div class="row my-2 g-4">
        <div class="col-12">
          <h2>CCL2021中文空间语义理解评测数据提交</h2>
        </div>
        <div class="col-12">
          <p><a href="https://2030nlp.github.io/SpaCE2021/">返回主页</a></p>
        </div>
      </div>
      <div class="row my-2 g-3">
        <div class="col-12">
            <p>数据提交系统升级维护中，请稍后再试。</p>
        </div>
      </div>
      <div class="row my-2 g-3" v-if="false">
        <div class="col-12">
            <ul class="nav nav-tabs">
              <li class="nav-item">
                <span class="nav-link" :class="{'active':solution==1}" v-on:click="solution=1">方法1</span>
              </li>
              <li class="nav-item">
                <span class="nav-link" :class="{'active':solution==2}" v-on:click="solution=2">方法2</span>
              </li>
              <!-- <li class="nav-item">
                <span class="nav-link" :class="{'active':solution==3}" v-on:click="solution=3">方法3</span>
              </li> -->
            </ul>
        </div>
      </div>
      <div class="row my-2 g-3" v-if="false">
        <div class="col-12" v-if="solution==2">
            <div>
              <p>请将所有题目的答案从True/False转换为1/0，按顺序拼接为字符串。</p>
            </div>
        </div>
        <div class="col-12" v-if="solution==2">
            <div>
                <label for="which_set" class="form-label">Subtask 1 字符串</label>
                <textarea class="form-control" v-model="sheet1" rows="2"></textarea>
                <div class="form-text"><p>由01拼接成的字符串，每个字符代表一道题的答案。已输入{{sheet1.length}}题。</p></div>
            </div>
        </div>
        <div class="col-12" v-if="solution==2">
            <div>
                <label for="which_set" class="form-label">Subtask 2 字符串</label>
                <textarea class="form-control" v-model="sheet2" rows="2"></textarea>
                <div class="form-text"><p>由01拼接成的字符串，每个字符代表一道题的答案。已输入{{sheet2.length}}题。</p></div>
            </div>
        </div>
        <div class="col-12" v-if="solution==2">
            <div>
                <label for="which_set" class="form-label">Subtask 3 字符串</label>
                <textarea class="form-control" v-model="sheet3" rows="2"></textarea>
                <div class="form-text"><p>由01拼接成的字符串，每<strong>两</strong>个字符代表一道题的答案。已输入{{sheet3.length/2}}题。</p></div>
            </div>
        </div>
        <div class="col-12" v-if="solution==1">
            <div>
              <p>请将您的数据组织成与 <a href="https://github.com/2030NLP/SpaCE2021/tree/main/data/pack1" target="_blank">数据集提供的json文件</a> 格式相同的文件。请使用utf-8编码。</p>
              <p>每个文件是一个json列表。列表中的元素必须要有qID字段，可以没有context字段。子任务1需要有judge1字段，子任务2需要有judge2字段，子任务3需要同时有judge1和judge2字段。</p>
              <p>三个子任务的结果可以放在同一个json列表文件里，也可以分开放在多个json列表文件里。</p>
            </div>
        </div>
        <div class="col-12" v-if="solution==1">
            <form name="file-form" class="input-group">
                <input class="form-control" type="file" name="file-input" id="file-input" multiple>
                <button class="btn btn-outline-secondary" type="button" v-on:click="onImport">先载入</button>
                <button class="btn btn-outline-secondary" type="button" v-on:click="readFiles">再读取</button>
            </form>
            <div class="form-text"><p>一次可以选择多个文件，载入所有文件之后再读取（转换成待提交的字符串），读取之后再提交。</p></div>
        </div>
        <div class="col-12" v-if="solution==1 && files.length">
            <ul class="list-group list-group-horizontal-lg">
                <li class="list-group-item flex-fill" v-for="file in files">
                    <span :class="file.readed?'text-success':''">{{file.name}}</span>
                    <button type="button" v-if="file.isUsable" v-on:click="deleteFile(file)" class="btn btn-sm btn-close"></button>
                </li>
            </ul>
            <div class="form-text"><p>载入所有文件之后再读取，读取之前可以删除不小心多选进来的文件。</p></div>
        </div>
        <div class="col-12" v-if="solution==1">
            <div>
                <p>文件读取完毕之后，点击 <button class="btn btn-sm btn-primary" type="button" v-on:click="trans">转换</button> ，生成需要提交的字符串，然后提交。</p>
            </div>
        </div>
        <div class="col-4" v-if="solution==1">
            <div>
                <label for="which_set" class="form-label">Subtask 1 字符串（自动产生）</label>
                <textarea class="form-control" v-model="sheet1" rows="1" disabled></textarea>
                <div class="form-text"><p>由01拼接成的字符串，每个字符代表一道题的答案。已输入{{sheet1.length}}题。</p></div>
            </div>
        </div>
        <div class="col-4" v-if="solution==1">
            <div>
                <label for="which_set" class="form-label">Subtask 2 字符串（自动产生）</label>
                <textarea class="form-control" v-model="sheet2" rows="1" disabled></textarea>
                <div class="form-text"><p>由01拼接成的字符串，每个字符代表一道题的答案。已输入{{sheet2.length}}题。</p></div>
            </div>
        </div>
        <div class="col-4" v-if="solution==1">
            <div>
                <label for="which_set" class="form-label">Subtask 3 字符串（自动产生）</label>
                <textarea class="form-control" v-model="sheet3" rows="1" disabled></textarea>
                <div class="form-text"><p>由01拼接成的字符串，每<strong>两</strong>个字符代表一道题的答案。已输入{{sheet3.length/2}}题。</p></div>
            </div>
        </div>
        <!-- <div class="col-12" v-if="solution==3">
            <div>
              <p>使用中 <a href="https://github.com/2030NLP/SpaCE2021/blob/main/ref/evaluate.py#L7" target="_blank">evaluate.py 中的 formatter函数</a> 处理后，将数据复制粘贴到此处：</p>
            </div>
            <div>
              <textarea class="form-control" v-model="xx" rows="6"></textarea>
            </div>
        </div> -->
      </div>
      <div class="row my-2 g-4" v-if="false">
        <div class="col-12">
            <hr>
        </div>
        <div class="col-md-2">
          <label for="which_set" class="form-label">所用数据集</label>
          <select class="form-select" id="which_set" v-model="which_set" required>
              <option selected>【请选择】</option>
              <option value="1">dev</option>
              <!-- <option value="2">test</option> -->
            </select>
        </div>
        <div class="col-md-5">
          <label for="team_name" class="form-label">队伍名称</label>
          <input type="text" class="form-control"id="team_name" v-model="form.team_name" required>
        </div>
        <div class="col-md-5">
          <label for="email" class="form-label">联系邮箱</label>
          <input type="text" class="form-control"id="email" v-model="form.email" required>
        </div>
      </div>
      <div class="row my-2 g-4">
        <div class="col-12">
          <button class="btn" :class="check_basic?'btn-primary':'btn-secondary'" v-on:click="submitIt">提交</button>
        </div>
      </div>
    </div></div>

    <div class="container page my-5" id="the_result" v-if="submitted"><div class="container py-2">
        <div class="row my-4 g-4">
            <div class="col-12">
                <h2>CCL2021中文空间语义理解评测数据提交</h2>
            </div>
        </div>
        <div class="col-12">
          <p><a href="https://2030nlp.github.io/SpaCE2021/">返回主页</a></p>
        </div>
        <div class="row my-4 g-4">
            <div class="col-12">
                <p>确认成功！</p>
            </div>
            <div class="col-12">
                <button class="btn btn-primary" v-on:click="reset">返回</button>
            </div>
        </div>
    </div></div>

    <div class="container page my-5" id="the_history" v-if="submit_history.length"><div class="container py-2">
        <div class="row my-2 g-4">
            <div class="col-12">
                <h4>本机提交历史</h4>
            </div>
            <div class="col-12">
                <ul>
                    <li v-for="hh in submit_history">队伍「{{hh.team_name}}」在「{{hh.time}}」提交了{{which_set_map[hh.which_set]}}数据集的答卷。</li>
                </ul>
            </div>
        </div>
    </div></div>





<!-- Modal -->
<transition name = "modal-fade"><div v-show="ui.modal_open" class="modal-wrap">
<div class="modal-backdrop show"></div>
<div class="modal" id="exampleModalScrollable" tabindex="-1" role="dialog" aria-labelledby="exampleModalScrollableTitle" style="display: block;" aria-modal="true">
    <div class="modal-dialog modal-lg modal-dialog-scrollable">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="exampleModalScrollableTitle">文档</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true" v-on:click="toggle_modal('')">×</span>
                </button>
            </div>
            <div class="modal-body"><div>
                <div>
                    <p></p>
                </div>
            </div></div>
            <div class="modal-footer">
                <button type="button" class="btn btn-sm btn-secondary" data-dismiss="modal" v-on:click="toggle_modal('')">Close</button>
            </div>
        </div>
    </div>
</div>
</div>
</transition>


<!-- Alert -->
<div class="alert-wrap" style="display: block;" ref="alert_wrap">
    <transition name = "fade" v-for="alert in ui.alerts"><div v-show="alert.show" class="alert alert-dismissible alert-success" :class="'alert-'+alert.class">
        <button type="button" class="btn-close" v-on:click="remove_alert(alert.idx)"></button>
        <div v-html="alert.html"></div>
    </div></transition>
</div>





</div>
<!-- <script src="https://cdn.jsdelivr.net/npm/leancloud-storage@4.10.1/dist/av-min.js"></script> -->
<script src="https://cdn.jsdelivr.net/npm/leancloud-storage@5.0.0-beta.0/dist/browser/lc.min.js"></script>
<script type="text/javascript" src="dist/vue.min.js"></script>
<script type="text/javascript" src="dist/FileSaver.js"></script>
<script type="text/javascript" src="js/Submit.js"></script>
</body>
</html>
